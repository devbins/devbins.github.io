<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>ç”¨Dockerä¸‹è½½AOSPæºç  - devbins blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="devbins" /><meta name="description" content="AOSP ä»‹ç» AOSP æ˜¯ Android å¼€æ”¾æºç é¡¹ç›®ï¼Œé€šä¿—ç‚¹å°±æ˜¯æ•´ä¸ª Android çš„æºç ã€‚æœ‰äº† AOSP æˆ‘ä»¬å°±å¯ä»¥åœ¨æºç çš„å±‚é¢å»äº†è§£æ•´ä¸ª Android ç³»ç»Ÿã€‚ç”šè‡³å¯ä»¥è‡ªå·±åŸºäº AOSP å»å®šåˆ¶è‡ªå·±ç³»ç»Ÿï¼Œè¿™ä¹Ÿæ˜¯ä¼—å¤š" /><meta name="keywords" content="devbins, Emacs, ArchLinux" />






<meta name="generator" content="Hugo 0.81.0 with theme even" />


<link rel="canonical" href="http://devbins.githu.io/post/aosp/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.d97d1cfbcf69d3b0ef05584c067741a5ed8f13c6065f6374535c8ce9aab37245.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="ç”¨Dockerä¸‹è½½AOSPæºç " />
<meta property="og:description" content="AOSP ä»‹ç» AOSP æ˜¯ Android å¼€æ”¾æºç é¡¹ç›®ï¼Œé€šä¿—ç‚¹å°±æ˜¯æ•´ä¸ª Android çš„æºç ã€‚æœ‰äº† AOSP æˆ‘ä»¬å°±å¯ä»¥åœ¨æºç çš„å±‚é¢å»äº†è§£æ•´ä¸ª Android ç³»ç»Ÿã€‚ç”šè‡³å¯ä»¥è‡ªå·±åŸºäº AOSP å»å®šåˆ¶è‡ªå·±ç³»ç»Ÿï¼Œè¿™ä¹Ÿæ˜¯ä¼—å¤š" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://devbins.githu.io/post/aosp/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2019-10-23T00:00:00&#43;08:00" />
<meta property="article:modified_time" content="2019-10-23T00:00:00&#43;08:00" />

<meta itemprop="name" content="ç”¨Dockerä¸‹è½½AOSPæºç ">
<meta itemprop="description" content="AOSP ä»‹ç» AOSP æ˜¯ Android å¼€æ”¾æºç é¡¹ç›®ï¼Œé€šä¿—ç‚¹å°±æ˜¯æ•´ä¸ª Android çš„æºç ã€‚æœ‰äº† AOSP æˆ‘ä»¬å°±å¯ä»¥åœ¨æºç çš„å±‚é¢å»äº†è§£æ•´ä¸ª Android ç³»ç»Ÿã€‚ç”šè‡³å¯ä»¥è‡ªå·±åŸºäº AOSP å»å®šåˆ¶è‡ªå·±ç³»ç»Ÿï¼Œè¿™ä¹Ÿæ˜¯ä¼—å¤š"><meta itemprop="datePublished" content="2019-10-23T00:00:00&#43;08:00" />
<meta itemprop="dateModified" content="2019-10-23T00:00:00&#43;08:00" />
<meta itemprop="wordCount" content="1457">
<meta itemprop="keywords" content="Android," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ç”¨Dockerä¸‹è½½AOSPæºç "/>
<meta name="twitter:description" content="AOSP ä»‹ç» AOSP æ˜¯ Android å¼€æ”¾æºç é¡¹ç›®ï¼Œé€šä¿—ç‚¹å°±æ˜¯æ•´ä¸ª Android çš„æºç ã€‚æœ‰äº† AOSP æˆ‘ä»¬å°±å¯ä»¥åœ¨æºç çš„å±‚é¢å»äº†è§£æ•´ä¸ª Android ç³»ç»Ÿã€‚ç”šè‡³å¯ä»¥è‡ªå·±åŸºäº AOSP å»å®šåˆ¶è‡ªå·±ç³»ç»Ÿï¼Œè¿™ä¹Ÿæ˜¯ä¼—å¤š"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">devbins</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">devbins</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">ç”¨Dockerä¸‹è½½AOSPæºç </h1>

      <div class="post-meta">
        <span class="post-time"> 2019-10-23 </span>
        <div class="post-category">
            <a href="/categories/android/"> Android </a>
            </div>
          <span class="more-meta"> çº¦ 1457 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 3 åˆ†é’Ÿ </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#aosp-ä»‹ç»">AOSP ä»‹ç»</a></li>
    <li><a href="#repo-å·¥å…·">Repo å·¥å…·</a></li>
    <li><a href="#åˆ›å»ºä¸€ä¸ªæŒ‚è½½é•œåƒç£ç›˜">åˆ›å»ºä¸€ä¸ªæŒ‚è½½é•œåƒç£ç›˜</a></li>
    <li><a href="#æ„å»ºå®¹å™¨å¹¶å¯åŠ¨">æ„å»ºå®¹å™¨å¹¶å¯åŠ¨</a>
      <ul>
        <li><a href="#dockerfile">Dockerfile</a></li>
        <li><a href="#entrypoint">ENTRYPOINT</a></li>
        <li><a href="#å¯åŠ¨å®¹å™¨å¹¶å¼€å§‹ä¸‹è½½">å¯åŠ¨å®¹å™¨å¹¶å¼€å§‹ä¸‹è½½</a></li>
        <li><a href="#æˆåŠŸ">æˆåŠŸ</a></li>
        <li><a href="#ç¢°åˆ°çš„é”™è¯¯">ç¢°åˆ°çš„é”™è¯¯</a></li>
      </ul>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
    <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="aosp-ä»‹ç»">AOSP ä»‹ç»</h2>
<p><code>AOSP</code> æ˜¯ Android å¼€æ”¾æºç é¡¹ç›®ï¼Œé€šä¿—ç‚¹å°±æ˜¯æ•´ä¸ª <code>Android</code> çš„æºç ã€‚æœ‰äº† <code>AOSP</code> æˆ‘ä»¬å°±å¯ä»¥åœ¨æºç çš„å±‚é¢å»äº†è§£æ•´ä¸ª <code>Android</code> ç³»ç»Ÿã€‚ç”šè‡³å¯ä»¥è‡ªå·±åŸºäº <code>AOSP</code> å»å®šåˆ¶è‡ªå·±ç³»ç»Ÿï¼Œè¿™ä¹Ÿæ˜¯ä¼—å¤š <code>ROM</code> çš„ç›´æ¥æˆ–é—´æ¥èµ·æºã€‚</p>
<p>è™½ç„¶æˆ‘ä»¬ä¸ä¸€å®šä¼šå»åš <code>ROM</code> ï¼Œä½†å¯¹äºå¼€å‘æ¥è¯´ï¼Œäº†è§£ <code>Android</code> ç³»ç»Ÿçš„åº•å±‚åŸç†è¿˜æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œè¿™ä¹Ÿæ˜¯æˆä¸ºé«˜çº§å·¥ç¨‹å¸ˆçš„å¿…ç»ä¹‹è·¯ã€‚æºç é‡Œé¢æœ‰éå¸¸å¤šçš„ä¸œè¥¿å€¼å¾—æˆ‘ä»¬å»å­¦ä¹ ï¼Œæ˜¯ä¸€åº§å®è—ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦æŠŠè¿™ä¸ªå®è—ä¸‹è½½ä¸‹æ¥ã€‚</p>
<h2 id="repo-å·¥å…·">Repo å·¥å…·</h2>
<p>ç›®å‰å¸‚é¢ä¸Šæœ€æµè¡Œçš„ç‰ˆæœ¬æ§åˆ¶ç®¡ç†å·¥å…·æ˜¯ <code>Git</code> ï¼Œ <code>AOSP</code> ä¹Ÿæ˜¯ç”¨ <code>Git</code> æ¥ç®¡ç†çš„ï¼Œä¸è¿‡ <code>AOSP</code> ä¸­æœ‰å‡ ç™¾ä¸ª <code>Git</code> ä»“åº“ç®¡ç†èµ·æ¥éå¸¸ä¸æ–¹ä¾¿ï¼Œå…‰ä¸‹è½½å°±è¦å‡ ç™¾æ¬¡ï¼Œæƒ³æƒ³éƒ½å¯æ€•ã€‚</p>
<p>ä¸ºäº†ç®¡ç† <code>AOSP</code> è¿™ä¹ˆåºå¤§çš„ä»£ç ï¼Œè°·æ­Œå¼€å‘äº† <code>Repo</code> çš„å·¥å…·ä¸“é—¨ç”¨æ¥ç®¡ç† <code>AOSP</code> ä»£ç ã€‚ <code>Ropo</code> æœ¬èº«æ˜¯ç”¨ <code>Python</code> å†™çš„ï¼Œæ˜¯å¯¹ <code>Git</code> çš„ä¸€æ¬¡å°è£…ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬å°±ä¸è¦æ¯ä¸ªä»“åº“éƒ½å»æ“ä½œä¸€æ¬¡ã€‚</p>
<p>è¦æƒ³ä½¿ç”¨ <code>Repo</code> éœ€è¦å…ˆåœ¨ <code>Docker</code> ä¸­å®‰è£…ï¼Œç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œæˆ‘ä»¬ä½¿ç”¨å›½å†…æ¸…åå¤§å­¦çš„é•œåƒæ¥åŠ é€Ÿä¸‹è½½ï¼Œæˆ–è€…å¯ä»¥ä½¿ç”¨<a href="https://lug.ustc.edu.cn/wiki/mirrors/help/aosp">ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦AOSP</a> ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">mkdir ~/bin
curl https://mirrors.tuna.tsinghua.edu.cn/git/git-repo &gt; ~/bin/repo
chmod a+x ~/bin/repo
</code></pre></td></tr></table>
</div>
</div><h2 id="åˆ›å»ºä¸€ä¸ªæŒ‚è½½é•œåƒç£ç›˜">åˆ›å»ºä¸€ä¸ªæŒ‚è½½é•œåƒç£ç›˜</h2>
<p>Mac ä¸Šçš„æ–‡ä»¶åé»˜è®¤æ˜¯ä¸åŒºåˆ†å¤§å°å†™çš„ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ”¯æŒå¤§å°å†™çš„é•œåƒæ–‡ä»¶ï¼Œç”¨æ¥å­˜æ”¾ä¸‹è½½çš„ <code>AOSP</code> ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å½“å®¹å™¨è¢«åˆ é™¤çš„æ—¶å€™ï¼Œä¸‹è½½çš„å†…å®¹ä¸ä¼šè·Ÿç€ä¸€èµ·è¢«åˆ é™¤ã€‚</p>
<p>æ‰“å¼€ <code>Disk Utility</code> ï¼ŒæŒ‰ä¸‹ <code>âŒ˜ + N</code> åˆ›å»ºä¸€ä¸ªï¼Œè®°å¾—è¦é€‰æ‹©å¤§å°å†™æ•æ„Ÿçš„æ ¼å¼ã€‚å¦‚æœä½ éœ€è¦ç¼–è¯‘ï¼Œæœ€å¥½è¦æœ‰ 300Gï¼Œåœ¨ <code>Android 10</code> ä¸Šã€‚ä¸éœ€è¦ç¼–è¯‘ç»™ 150G å°±å¤Ÿäº†ã€‚</p>
<h2 id="æ„å»ºå®¹å™¨å¹¶å¯åŠ¨">æ„å»ºå®¹å™¨å¹¶å¯åŠ¨</h2>
<h3 id="dockerfile">Dockerfile</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> ubuntu</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">ENV</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&#34;/root/bin:</span><span class="si">${</span><span class="nv">PATH</span><span class="si">}</span><span class="s2">&#34;</span><span class="err">
</span><span class="err"></span><span class="k">ENV</span> <span class="nv">REPO_URL</span><span class="o">=</span><span class="s1">&#39;https://mirrors.tuna.tsinghua.edu.cn/git/git-repo/&#39;</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt update <span class="o">&amp;&amp;</span> apt install -y git curl python openjdk-8-jdk git-core gnupg flex bison gperf build-essential zip zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z-dev ccache libgl1-mesa-dev libxml2-utils xsltproc unzip <span class="o">&amp;&amp;</span> <span class="se">\
</span><span class="se"></span>    rm -rf /var/cahce/apt <span class="o">&amp;&amp;</span> <span class="se">\
</span><span class="se"></span>    rm -rf /var/lib/apt/lists <span class="o">&amp;&amp;</span> <span class="se">\
</span><span class="se"></span>    mkdir ~/bin <span class="o">&amp;&amp;</span> curl https://mirrors.tuna.tsinghua.edu.cn/git/git-repo &gt; ~/bin/repo <span class="o">&amp;&amp;</span> chmod a+x ~/bin/repo <span class="o">&amp;&amp;</span> mkdir ~/aosp<span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">VOLUME</span><span class="s"> ~/aosp</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">WORKDIR</span><span class="s"> ~/aosp</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">COPY</span> entrypoint.sh /root/entrypoint.sh<span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&#34;/root/entrypoint.sh&#34;</span><span class="p">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="entrypoint">ENTRYPOINT</h3>
<p><code>entrypoint</code> æ˜¯ä¸ª <code>shell</code> è„šæœ¬ï¼Œç”¨æ¥åœ¨å¯åŠ¨å®¹å™¨æ—¶æ‰§è¡Œå‘½ä»¤ç”¨çš„ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åªè¦åˆå§‹åŒ– <code>repo</code> å¹¶æ‰§è¡Œ <code>sync</code> å°±ä¼šå¼€å§‹ä¸‹è½½ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nb">cd</span> ~/aosp
<span class="nb">echo</span> <span class="s2">&#34;start sync&#34;</span>
repo init -u https://aosp.tuna.tsinghua.edu.cn/platform/manifest <span class="o">&amp;&amp;</span> repo sync

<span class="nb">exec</span> <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="å¯åŠ¨å®¹å™¨å¹¶å¼€å§‹ä¸‹è½½">å¯åŠ¨å®¹å™¨å¹¶å¼€å§‹ä¸‹è½½</h3>
<p>å‡†å¤‡å¥½ <code>Dockerfile</code> å’Œ <code>entrypoint</code> åï¼Œæˆ‘ä»¬å¼€å§‹æ„å»ºé•œåƒ
<code>docker build -t aosp .</code>
æ‰§è¡Œæ„å»ºéœ€è¦ä¸€å®šçš„æ—¶é—´ï¼Œç­‰å¾…æ„å»ºå®Œæˆã€‚æ„å»ºå®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢æŒ‡ä»¤å¯åŠ¨å®¹å™¨
<code>docker run -v /Volumes/Android10:/root/aosp --name aosp aosp sync</code>
åœ¨ä¸‹è½½çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç»å¸¸ä¼šç¢°åˆ°å®¹å™¨æ„å¤–é€€å‡ºã€‚å¯ä»¥é€šè¿‡ <code>docker start aosp</code> æ¥é‡å¯å®¹å™¨ã€‚</p>
<h3 id="æˆåŠŸ">æˆåŠŸ</h3>
<p>å¦‚æœä½ çœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºï¼Œè¡¨ç¤ºä¸‹è½½å®Œæˆäº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">Checking out project platform/test/vts-testcase/hal-trace
Checking out project platform/test/vts-testcase/kernel
Checking out project platform/test/vts-testcase/performance
Syncing work tree:  98% <span class="o">(</span>557/568<span class="o">)</span>Checking out project platform/test/vts-testcase/security
Checking out project platform/test/vts-testcase/vndk
Checking out project toolchain/binutils
Checking out project platform/tools/apksig
Checking out project platform/tools/external/fat32lib
Checking out project platform/tools/external/gradle
Syncing work tree:  99% <span class="o">(</span>563/568<span class="o">)</span>Checking out project platform/tools/loganalysis
Checking out project platform/tools/repohooks
Checking out project platform/tools/test/connectivity
Checking out project platform/tools/tradefederation/contrib
Checking out project platform/tools/tradefederation
Syncing work tree: 100% <span class="o">(</span>568/568<span class="o">)</span>, <span class="k">done</span>.
</code></pre></td></tr></table>
</div>
</div><h3 id="ç¢°åˆ°çš„é”™è¯¯">ç¢°åˆ°çš„é”™è¯¯</h3>
<h4 id="entrypoint-dot-sh-permission-denied">entrypoint.sh permission denied</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">docker: Error response from daemon: OCI runtime create failed: container_linux.go:345: starting container process caused <span class="s2">&#34;exec: \&#34;/root/entrypoint.sh\&#34;: permission denied&#34;</span>: unknown.
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªé—®é¢˜æ˜¯åœ¨å®¿ä¸»æœºä¸Šæ²¡æœ‰ç»™æ‰§è¡Œæƒé™ï¼Œåœ¨å®¿ä¸»æœºä¸Šæ‰§è¡Œä¸‹é¢æŒ‡ä»¤
<code>chmod a+x entrypoint.sh</code></p>
<h4 id="error-rpc-failed-curl-56-gnutls-recv-error--54--error-in-the-pull-function-dot">error: RPC failed; curl 56 GnuTLS recv error (-54): Error in the pull function.</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">error: RPC failed<span class="p">;</span> curl <span class="m">56</span> GnuTLS recv error <span class="o">(</span>-54<span class="o">)</span>: Error in the pull <span class="k">function</span>.
fatal: The remote end hung up unexpectedly
fatal: early EOF
fatal: index-pack failed
</code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸ªé”™è¯¯æ˜¯ç”±äº <code>git</code> çš„ç¼“å­˜è®¾ç½®çš„ä¸å¤Ÿå¤§</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">git config --global http.sslVerify <span class="nb">false</span>
git config --global http.postBuffer <span class="m">1073741824</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æœè®¾ç½®çš„å¤ªå¤§äº†ä¼šåŒ…ä¸‹é¢çš„é”™è¯¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">fatal: Out of memory, malloc failed <span class="o">(</span>tried to allocate <span class="m">20000000000</span> bytes<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="index-pack-died-of-signal-952">index-pack died of signal 952</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">git config --global pack.windowMemory <span class="s2">&#34;32m&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="server-does-not-provide-clone-dot-bundle">Server does not provide clone.bundle</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">curl: <span class="o">(</span>22<span class="o">)</span> The requested URL returned error: <span class="m">404</span>
Server does not provide clone.bundle<span class="p">;</span> ignoring.
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä½ ç”¨çš„æ¸…åçš„æºï¼Œä¼šç¢°åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ˜¯ç”±äºæ¸…åçš„æºä¸æ”¯æŒ <code>git</code> åè®®å¯¼è‡´çš„ï¼Œå¿½ç•¥å°±å¥½ï¼Œä¸å½±å“ä¸‹è½½ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>åœ¨ <code>Docker</code> ä¸­ä¸‹è½½ <code>AOSP</code> å¯¹äºæ²¡æœ‰ <code>Linux</code> çš„å°ä¼™ä¼´æ¥è¯´æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä¸éœ€è¦å»å®‰è£…è™šæ‹Ÿæœºï¼Œåªéœ€è¦å¯åŠ¨ä¸€ä¸ªå®¹å™¨å°±å¯ä»¥äº†ã€‚</p>
<p>ä½†æ˜¯ç°å®å¾€å¾€æ²¡é‚£ä¹ˆå®¹æ˜“ï¼Œåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¼šå‘ç°ï¼Œå®¹å™¨è«åå…¶å¦™å°±é€€å‡ºäº†ï¼Œéœ€è¦ä¸æ–­çš„é‡å¯å®¹å™¨æ¥ç¡®ä¿ä¸‹è½½å®Œæˆã€‚</p>
<p>å¦‚æœä½ éœ€è¦ç¼–è¯‘çš„è¯è¿˜æ˜¯å»ºè®®ç”¨è™šæ‹Ÿæœºæ¥è¿›è¡Œï¼Œç”¨å®¹å™¨å°±éå¸¸ä¸æ–¹ä¾¿äº†ã€‚</p>
<p>æœ€åè¿˜æ˜¯å»ºè®®ä½¿ç”¨è™šæ‹Ÿæœºæ¥ä¸‹è½½ <code>AOSP</code> ï¼Œè¿™æ ·ä¸ç”¨ä¸€ç›´å»è§‚å¯Ÿå®¹å™¨çš„çŠ¶æ€ï¼Œè™šæ‹Ÿæœºä¸‹è½½çš„ä½“éªŒä¼šæ¯”ä½¿ç”¨ <code>Docker</code> å¥½å¾ˆå¤šï¼Œä¹Ÿæ›´èŠ‚çœæ—¶é—´ã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li><a href="https://lug.ustc.edu.cn/wiki/mirrors/help/aosp">AOSP(Android) é•œåƒä½¿ç”¨å¸®åŠ© {LUG@USTC}</a></li>
<li><a href="http://blog.michaelx.tech/2017-03/Ubuntu-14-04%25E7%25BC%2596%25E8%25AF%2591AOSP-for-Nexus-Pixel/">Ubuntu 14.04ç¼–è¯‘AOSP for Nexus/Pixel | MichaelX&rsquo;s Blog | MichaelXçš„å¼€å‘åšå®¢</a></li>
<li><a href="https://github.com/Trumeet/AOSP-Build-Environment-Docker">GitHub - Trumeet/AOSP-Build-Environment-Docker: A docker image to provide a systemless AOSP build environment</a></li>
<li><a href="https://github.com/openstf/docker-aosp">GitHub - openstf/docker-aosp: Docker images for checking out AOSP branches and building external code inside the source tree.</a></li>
<li><a href="https://github.com/kylemanna/docker-aosp">GitHub - kylemanna/docker-aosp: ğŸ— Minimal Android AOSP build environment with handy automation wrapper scripts</a></li>
<li><a href="https://source.android.google.cn/setup/start/build-numbers#source-code-tags-and-builds">Codenames, Tags, and Build Numbers Â |Â  Android Open Source Project</a></li>
<li><a href="https://blog.csdn.net/counsellor/article/details/86591081">repo å·¥å…·ä½¿ç”¨æ‰‹å†Œ - counsellorçš„ä¸“æ </a></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">devbins</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2019-10-23
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">è®¸å¯åè®®</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/android/">Android</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/parallel/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Parallels tools å®‰è£…å¤±è´¥</span>
            <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
          </a>
        <a class="next" href="/post/plantuml/">
            <span class="next-text nav-default">åœ¨Emacsä¸­ç”¨PlantUMLç”»UML</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitalk = new Gitalk({
        id: '2019-10-23 00:00:00 \u002b0800 CST',
        title: 'ç”¨Dockerä¸‹è½½AOSPæºç ',
        clientID: '1234e4dd9e0ad49470be',
        clientSecret: '9acb7351fca3dcca6d3cc50be8a1d2cf329f4163',
        repo: 'devbins.github.io',
        owner: 'devbins\u0027',
        admin: ['devbins\u0027'],
        body: decodeURI(location.href)
      });
      gitalk.render('gitalk-container');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="binshengh@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://github.com/devbins" class="iconfont icon-github" title="github"></a>
  <a href="http://devbins.githu.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2016 - 
    2021<span class="heart"><i class="iconfont icon-heart"></i></span><span>devbins</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>








</body>
</html>
